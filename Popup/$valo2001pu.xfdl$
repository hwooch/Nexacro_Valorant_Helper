<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="valo2001pu" width="500" height="600" titletext="구인 글 작성하기" background="#202027" borderRadius="0px 0px 20px 20px" border="2px solid #a1a1ac" onclick="valo2001pu_onclick" onload="valo2001pu_onload">
    <Layouts>
      <Layout height="600" width="500">
        <Static id="sta_user_name" taborder="0" text="플레이어 이름" left="22" top="20" width="116" height="23" color="white" font="normal 15pt/normal &quot;이사만루체 Light&quot;"/>
        <Edit id="edit_user_name" taborder="1" left="20" top="sta_user_name:20" height="58" text="" background="#282830" border="2px solid #515163" color="#505061" enable="false" borderRadius="10px" font="normal 13pt/normal &quot;이사만루체 Light&quot;" right="20" textAlign="left" padding="0px 0px 0px 10px" cursor="default"/>
        <Button id="btn_agent_filter_all" taborder="8" left="20" top="208" width="48" height="47" background="url('theme://images/valo_all.png') no-repeat center center /contain #4e4e5f" borderRadius="10px" border="5px solid #4e4e5f" cursor="pointer" onclick="Button_onclick" onmouseenter="Button_onmouseenter" onmouseleave="Button_onmouseleave"/>
        <Static id="sta_memo" taborder="2" text="메모" left="22" top="btn_agent_filter_all:50" width="37" height="23" color="white" font="normal 15pt/normal &quot;이사만루체 Light&quot;"/>
        <Edit id="edit_memo" taborder="3" left="20" top="sta_memo:20" height="118" text="" background="#282830" border="2px solid #515163" color="#505061" enable="true" borderRadius="10px" font="normal 13pt/normal &quot;이사만루체 Light&quot;" right="20" textAlign="left" padding="0px 0px 0px 10px" autoselect="true" tabstop="false" maxlength="100" displaynulltext="예시) 함께 할 듀오 파트너를 찾고있어요." onchanged="edit_memo_onchanged" oninput="edit_memo_oninput" onkillfocus="edit_memo_onkillfocus" onsetfocus="edit_memo_onsetfocus"/>
        <Button id="btn_focus" taborder="4" left="20" width="0" height="0" bottom="5"/>
        <Button id="btnOk" taborder="5" text="등록" width="90" height="50" bottom="30" onclick="btnOk_onclick" uWord="popup.ok" cssclass="btn_WF_FillRed" left="125"/>
        <Button id="btnCancle" taborder="6" text="취소" width="90" height="50" bottom="30" onclick="btnCancle_onclick" uWord="popup.ok" right="125" cssclass="btn_WF_FillGray"/>
        <Static id="sta_class" taborder="7" text="선호 클래스" left="22" top="edit_user_name:50" width="97" height="23" color="white" font="normal 15pt/normal &quot;이사만루체 Light&quot;"/>
        <Button id="btn_agent_filter_watch" taborder="9" left="btn_agent_filter_all:3" top="208" width="48" height="47" background="url('https://media.valorant-api.com/agents/roles/5fc02f99-4091-4486-a531-98459a3e95e9/displayicon.png') no-repeat center center /contain #4e4e5f" border="5px solid #4e4e5f" borderRadius="10px" cursor="pointer" onclick="Button_onclick" onmouseenter="Button_onmouseenter" onmouseleave="Button_onmouseleave"/>
        <Static id="sta_mic" taborder="10" text="마이크 여부" top="edit_user_name:50" height="23" color="white" font="normal 15pt/normal &quot;이사만루체 Light&quot;" right="22" width="97"/>
        <Button id="btn_agent_filter_enter" taborder="11" left="btn_agent_filter_watch:3" top="208" width="48" height="47" background="url('https://media.valorant-api.com/agents/roles/dbe8757e-9e92-4ed4-b39f-9dfc589691d4/displayicon.png') no-repeat center center /contain #4e4e5f" borderRadius="10px" border="5px solid #4e4e5f" cursor="pointer" onclick="Button_onclick" onmouseenter="Button_onmouseenter" onmouseleave="Button_onmouseleave"/>
        <Button id="btn_agent_filter_info" taborder="13" left="btn_agent_filter_enter:3" top="208" width="48" height="47" background="url('https://media.valorant-api.com/agents/roles/1b47567f-8f7b-444b-aae3-b0c634622d10/displayicon.png') no-repeat center center /contain #4e4e5f" border="5px solid #4e4e5f" borderRadius="10px" cursor="pointer" onclick="Button_onclick" onmouseenter="Button_onmouseenter" onmouseleave="Button_onmouseleave"/>
        <Button id="btn_agent_filter_smoke" taborder="12" left="btn_agent_filter_info:3" top="208" width="48" height="47" background="url('https://media.valorant-api.com/agents/roles/4ee40330-ecdd-4f2f-98a8-eb1243428373/displayicon.png') no-repeat center center /contain #4e4e5f" border="5px solid #4e4e5f" borderRadius="10px" cursor="pointer" onclick="Button_onclick" onmouseenter="Button_onmouseenter" onmouseleave="Button_onmouseleave"/>
        <Button id="btn_mic_off" taborder="15" top="208" width="48" height="47" background="url('theme://images/valo_mic_off.png') no-repeat center center /contain #4e4e5f" border="5px solid #4e4e5f" borderRadius="10px" right="20" cursor="pointer" onclick="Button_mic_onclick" onmouseleave="Button_mic_onmouseleave" onmouseenter="Button_mic_onmouseenter"/>
        <Button id="btn_mic_on" taborder="14" top="208" width="48" height="47" background="url('theme://images/valo_mic_on.png') no-repeat center center /contain #4e4e5f" border="5px solid #4e4e5f" borderRadius="10px" right="btn_mic_off:3" cursor="pointer" onmouseenter="Button_mic_onmouseenter" onmouseleave="Button_mic_onmouseleave" onclick="Button_mic_onclick"/>
      </Layout>
    </Layouts>
    <Script type="xscript5.1"><![CDATA[this.fvApp = nexacro.getApplication();

// 현재 선택된 필터 버튼을 저장할 변수
this.fv_selectedFilterBtn = null;

// 선호 클래스 버튼 클릭 메소드	
var sFilterRole = "전체";

// 현재 선택된 마이크 버튼을 저장할 변수
this.fv_selectedMicBtn = null;
var mic = "off";

// 화면 클릭하면 안보이는 버튼에 focus
this.valo2001pu_onclick = function(obj:nexacro.Form,e:nexacro.ClickEventInfo)
{
	this.btn_focus.setFocus();
};

// 등록 버튼 온클릭
this.btnOk_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	var user_name = this.edit_user_name.text.split("#")[0];
	var user_tag  = this.edit_user_name.text.split("#")[1];
	var user_memo = this.edit_memo.text;
	if (user_memo.length < 1) {
		user_memo = "";
	}
	var user_class = sFilterRole;
	var user_mic = mic;
	this.close(user_name + "||" + user_tag + "||" + user_memo + "||" + user_class + "||" + user_mic);
};

// 취소 버튼 온클릭
this.btnCancle_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.close(false);
};

// 메모 입력할때 색상 조절
this.edit_memo_onchanged = function(obj:nexacro.Edit,e:nexacro.ChangeEventInfo)
{
	if(this.edit_memo.text.length == 0){
		this.edit_memo.color = "#505061";
		this.edit_memo.value = null;
	}
};

// 메모 입력할때 색상 조절
this.edit_memo_oninput = function(obj:nexacro.Edit,e:nexacro.InputEventInfo)
{
	this.edit_memo.color = "white";
	if(this.edit_memo.text.length == 0){
		this.edit_memo.color = "#505061";
		this.edit_memo.value = null;
	}
};

// form 온로드 되었을때 값 전달받는거
this.valo2001pu_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	var sContents = this.getOwnerFrame().paramContents;
	var sIcon = this.getOwnerFrame().paramMsgIcon;
	
	this.edit_user_name.value = this.fvApp.gds_login.getColumn(0, "RIOT_ID") + "#" +
	this.fvApp.gds_login.getColumn(0, "RIOT_TAG");
	
	this.btn_agent_filter_all.click();
	this.btn_mic_off.click();
};

this.edit_memo_onkillfocus = function(obj:nexacro.Edit,e:nexacro.KillFocusEventInfo)
{
	this.edit_memo.border = "2px solid #515163";
};

this.edit_memo_onsetfocus = function(obj:nexacro.Edit,e:nexacro.SetFocusEventInfo)
{
	this.edit_memo.border = "2px solid white";
};

this.Button_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	// 이미 선택된 버튼을 또 누르면 아무것도 안 함
    if (this.fv_selectedFilterBtn == obj) {
		return;
	}
    //이전에 선택되어 있던 버튼이 있다면 -> 원래대로 어둡게 되돌리기
    if (this.fv_selectedFilterBtn) {
        this.fn_setFilterStyle(this.fv_selectedFilterBtn, "normal");
    }
	
    // 현재 누른 버튼 -> 선택된 상태로 저장 및 스타일 적용
    this.fv_selectedFilterBtn = obj;
    this.fn_setFilterStyle(obj, "selected");
	
    switch(obj.id) {
	case "btn_agent_filter_watch":
		sFilterRole = "감시자";
		break;
	case "btn_agent_filter_smoke":
		sFilterRole = "전략가";
		break;
	case "btn_agent_filter_enter":
		sFilterRole = "타격대";
		break;
	case "btn_agent_filter_info":
		sFilterRole = "척후대";
		break;
	default:
		sFilterRole = "전체";
    }
};

this.Button_onmouseenter = function(obj:nexacro.Button,e:nexacro.MouseEventInfo)
{
	// 마우스 올리면 무조건 밝게
    this.fn_setFilterStyle(obj, "hover");
};

this.Button_onmouseleave = function(obj:nexacro.Button,e:nexacro.MouseEventInfo)
{
	//  현재 선택된 버튼이라면, 마우스가 나가도 'normal'(어둠)로 바꾸지 않음!
    if (this.fv_selectedFilterBtn == obj) {
        this.fn_setFilterStyle(obj, "selected"); // 그림자만 빼고 밝은 상태 유지
    } else {
        this.fn_setFilterStyle(obj, "normal");   // 선택 안된 놈은 다시 어둡게
    }
};


// 버튼 스타일 통합 관리 함수
// status: "normal" (평소/어둠), "selected" (클릭/밝음), "hover" (마우스올림/밝음)
this.fn_setFilterStyle = function(obj, status)
{
    var btn_agent_watch = "https://media.valorant-api.com/agents/roles/5fc02f99-4091-4486-a531-98459a3e95e9/displayicon.png";
    var btn_agent_enter = "https://media.valorant-api.com/agents/roles/dbe8757e-9e92-4ed4-b39f-9dfc589691d4/displayicon.png";
    var btn_agent_smoke = "https://media.valorant-api.com/agents/roles/4ee40330-ecdd-4f2f-98a8-eb1243428373/displayicon.png";
    var btn_agent_info  = "https://media.valorant-api.com/agents/roles/1b47567f-8f7b-444b-aae3-b0c634622d10/displayicon.png";
	
    var sColor = "";
    
    // 선택되었거나 마우스가 올라갔을 때 (밝은 상태)
    if (status == "selected" || status == "hover") {
        obj.opacity = "";
        obj.border = "5px solid #00bba3";
        sColor = "#00bba3";
        
        if (status == "hover") {
			obj.cursor = "pointer";
			obj.boxShadow = "0px 0px 5px #00bba3";
        } else {
			obj.cursor = "default";
			obj.boxShadow = "";
        }
    } 
    // 평소 상태 (어두운 상태)
    else {
        //obj.opacity = "50%";
        obj.border = "5px solid #4e4e5f";
        sColor = "#4e4e5f";
        obj.cursor = "pointer";
        obj.boxShadow = "";
    }
	
    // 배경 이미지 설정
    switch(obj.id) {
	case "btn_agent_filter_all":
		obj.background = "url('theme://images/valo_all.png') no-repeat center center /contain " + sColor;
		break;
	case "btn_agent_filter_watch":
		obj.background = "url('"+ btn_agent_watch +"') no-repeat center center /contain " + sColor;
		break;
	case "btn_agent_filter_smoke":
		obj.background = "url('"+ btn_agent_smoke +"') no-repeat center center /contain " + sColor;
		break;
	case "btn_agent_filter_enter":
		obj.background = "url('"+ btn_agent_enter +"') no-repeat center center /contain " + sColor;
		break;
	case "btn_agent_filter_info":
		obj.background = "url('"+ btn_agent_info +"') no-repeat center center /contain " + sColor;
		break;
    }
};


this.Button_mic_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	// 이미 선택된 버튼을 또 누르면 아무것도 안 함
    if (this.fv_selectedMicBtn == obj) {
		return;
	}
    //이전에 선택되어 있던 버튼이 있다면 -> 원래대로 어둡게 되돌리기
    if (this.fv_selectedMicBtn) {
        this.fn_setMicStyle(this.fv_selectedMicBtn, "normal");
    }
	
    // 현재 누른 버튼 -> 선택된 상태로 저장 및 스타일 적용
    this.fv_selectedMicBtn = obj;
    this.fn_setMicStyle(obj, "selected");
	
    switch(obj.id) {
	case "btn_mic_on":
		mic = "on";
		break;
	default:
		mic = "off";
    }
}

this.Button_mic_onmouseenter = function(obj:nexacro.Button,e:nexacro.MouseEventInfo)
{
	// 마우스 올리면 무조건 밝게
    this.fn_setMicStyle(obj, "hover");
};

this.Button_mic_onmouseleave = function(obj:nexacro.Button,e:nexacro.MouseEventInfo)
{
	//  현재 선택된 버튼이라면, 마우스가 나가도 'normal'(어둠)로 바꾸지 않음!
    if (this.fv_selectedMicBtn == obj) {
        this.fn_setMicStyle(obj, "selected"); // 그림자만 빼고 밝은 상태 유지
    } else {
        this.fn_setMicStyle(obj, "normal");   // 선택 안된 놈은 다시 어둡게
    }
};


// 버튼 스타일 통합 관리 함수
// status: "normal" (평소/어둠), "selected" (클릭/밝음), "hover" (마우스올림/밝음)
this.fn_setMicStyle = function(obj, status)
{
    var sMicColor = "";
    
    // 선택되었거나 마우스가 올라갔을 때 (밝은 상태)
    if (status == "selected" || status == "hover") {
        obj.opacity = "";
        obj.border = "5px solid #00bba3";
        sMicColor = "#00bba3";
        
        if (status == "hover") {
			obj.cursor = "pointer";
			obj.boxShadow = "0px 0px 5px #00bba3";
        } else {
			obj.cursor = "default";
			obj.boxShadow = "";
        }
    } 
    // 평소 상태 (어두운 상태)
    else {
        //obj.opacity = "50%";
        obj.border = "5px solid #4e4e5f";
        sMicColor = "#4e4e5f";
        obj.cursor = "pointer";
        obj.boxShadow = "";
    }
	
    // 배경 이미지 설정
    switch(obj.id) {
	case "btn_mic_off":
		obj.background = "url('theme://images/valo_mic_off.png') no-repeat center center /contain " + sMicColor;
		break;
	case "btn_mic_on":
		obj.background = "url('theme://images/valo_mic_on.png') no-repeat center center /contain " + sMicColor;
		break;
    }
};
]]></Script>
  </Form>
</FDL>
